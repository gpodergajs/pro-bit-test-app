# /backend/Dockerfile.dev

FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

# Expose the Flask port and the Debugger port
EXPOSE 5000
EXPOSE 5678

# --- THIS IS THE KEY CHANGE ---
# Start the debugpy server, which in turn starts our Flask app.
# It waits for a debugger client to attach before starting the app.
CMD ["python", "-m", "debugpy", "--listen", "0.0.0.0:5678", "--wait-for-client", "-m", "flask", "run", "--host=0.0.0.0", "--no-debugger"]